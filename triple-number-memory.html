
<!DOCTYPE html>
<html>
    <!-- 
    Simple html game to teach grasping the size of a set by sight
    Copyright (C) 2016 Jacob Kanev

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    For a copy of the GNU General Public License see <http://www.gnu.org/licenses/>.
    -->
    
    <head>
        <title>Triple Number Memory</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        
        <style>
            
            html, body {
                background-color: #eef;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
                border: 0;
                font-family: Sans-Serif;
                overflow: hidden;
            }
            
            div.dots {
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                font-size: 5em;
                vertical-align: middle;
                font-weight: bold;
                color: #a00;
                display: none;
            }
            
            div.english {
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                font-size: 2.5em;
                line-height: 4em;
                vertical-align: middle;
                color: #060;
                display: none;
            }
            
            div.digits {
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                font-size: 4em;
                line-height: 3em;
                vertical-align: middle;
                color: #00a;
                display: none;
            }
            
            div.card {
                position: relative;
                float: left;
                border: 1px solid #CCCCCC;
                width: 8%;
                margin: 0.42%;
                height: 13.1%;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                padding: 10px 10px 10px 10px;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #4A4A4A;
                background-color: #F7F5F6;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#F7F5F6), to(#DDDDDD));
                background-image: -webkit-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -moz-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -ms-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -o-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: linear-gradient(to bottom, #F7F5F6, #DDDDDD);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#F7F5F6, endColorstr=#DDDDDD);
                white-space: normal;
                vertical-align: top;
            }
            
            div.card:hover{
                border:1px solid #ADADAD;
                background-color: #E0E0E0;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#E0E0E0), to(#BDBBBC));
                background-image: -webkit-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -moz-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -ms-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -o-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: linear-gradient(to bottom, #E0E0E0, #BDBBBC);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#E0E0E0, endColorstr=#BDBBBC);
            }            
            
            div.card:active{
                border:1px solid #ADADAD;
                background-color: #E0E0E0;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#BDBBBC), to(#E0E0E0));
                background-image: -webkit-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -moz-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -ms-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -o-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: linear-gradient(to bottom, #BDBBBC, #E0E0E0);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#BDBBBC, endColorstr=#E0E0E0);
            }
            
            div {
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #202020;
            }
            
            div.table {
                position: absolute; left:0; right:0;padding:0; width:100%; height:100%;
            }
            
            div.message {
                position: absolute; left:0; right:0; border:0; padding:0; width:100%; height:100%; 
                border: 1px solid #CCCCCC;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #4A4A4A;
                background-color: #F7F5F6;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#F7F5F6), to(#DDDDDD));
                background-image: -webkit-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -moz-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -ms-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -o-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: linear-gradient(to bottom, #F7F5F6, #DDDDDD);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#F7F5F6, endColorstr=#DDDDDD);
                white-space: normal;
                vertical-align: top;
            }
            
            div.result {
                position: relative; float: left; padding: 0.5em; margin: 0.1em;
                display: none;
                border: 1px solid #CCCCCC;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 10px;
                -moz-border-radius: 10px;
                border-radius: 10px;
            }
                        span.bubble {
                position: absolute;
                left:100px;
                top:10px; 
                font-size: 4em;
                text-shadow: 0.2em 1em 1em rgba(10,10,10,1);
            }
            
            </style>
        
        <script type="text/javascript">
            <!--
            
            // global gameHistory object
            var gameHistory = null;
            
            //______________________________
            // class for a single memory card
            // A memory card is represented by two divs with the outside one representing the card
            // and the inside one representing the face. The face div has a class according to the 
            // type: <div class="card"><div class="digits">23</div></div>
            // both divs have distinct IDs
            function Card(meaning, type, string)
            {
                this.meaning = meaning; // the actual number that's on the card
                this.type = type;     // whether the card has digits, dots, english, ..., on it
                this.string = string;     // the html representation
                this.random = Math.random();     // a random value used for shuffling
                this.faceId = meaning.toString() + "_" + type + "_face";     // the respective div id, e.g. "3_english_face"
                this.cardId = meaning.toString() + "_" + type + "_card";     // the respective div id for the card, e.g. "3_english_card"
                
                this.html = "<div class=\"card\" id=\"" + this.cardId + "\" onClick=\"top.gameHistory.move(" + this.meaning.toString() + ", '" + this.type + "');\">"
                    +     "<div class=\"" + this.type + "\" id=\"" + this.faceId + "\">"
                    +         this.string
                    +     "</div>"
                    + "</div>";
            }
            
            
            
            //______________________________
            // cover the card so its face is hidden
            function coverCard(id)
            {
                faceId = id + "_face";
                document.getElementById(this.faceId).style.display = "none";
            };
            
            
            
            //______________________________
            // uncover the card so its face is shown
            function uncoverCard(id)
            {
                faceId = id + "_face";
                document.getElementById(this.faceId).style.display = "block";
            };
            
            
            
            //______________________________
            // remove the card from the table
            function removeCard(id)
            {
                faceId = id + "_card";
                document.getElementById(this.faceId).style.visibility = "hidden";
            };
            
            
            
            //______________________________
            // gameHistory object, tracks open cards, removes cards and assigns points
            function GameHistory()
            {
                this.openCards = [];
            }
            
            //______________________________
            // a card has been clicked -- make a move
            GameHistory.prototype.move = function(meaning, type)
            {
                // uncover card
                id = meaning.toString() + "_" + type;
                uncoverCard(id);
                
                // push to memory
                this.openCards.push([id, meaning]);
                
                // cover latest card that's still open
                if (this.openCards.length > 3)
                    coverCard( this.openCards.shift()[0] );
                    
                // if three identical cards are open, remove them
                if (this.openCards.length === 3) {
                    if (this.openCards[0][1] === this.openCards[1][1] && this.openCards[1][1] === this.openCards[2][1]) {
                        for (var i=0; i<3; i++)
                            removeCard( this.openCards.shift()[0] );
                    }
                }
            };
            
            
            //______________________________
            // helper function for creating cards
            function addToArray(array, meaning, digits, dots, english)
            {
                array.push( new Card(meaning, "digits", digits) );
                array.push( new Card(meaning, "dots", dots) );
                array.push( new Card(meaning, "english", english) );
            }
            
            
          
            //______________________________
            // start a new game --
            // create a new gameHistory, create new cards, shuffle them
            // and put them face down on the table
            function newGame()
            {
                gameHistory = null;
                gameHistory = new GameHistory();
                
                var cards = [];
                addToArray(cards, 0, "0", "&nbsp;", "Zero");
                addToArray(cards, 1, "1", "&#8231;", "One");
                addToArray(cards, 2, "2", "&#8231;&#8231;", "Two");
                addToArray(cards, 3, "3", "&#8278;", "Three");
                addToArray(cards, 4, "4", "&#8280;", "Four");
                addToArray(cards, 5, "5", "&#8281;", "Five");
                addToArray(cards, 6, "6", "&#8281;&nbsp;&nbsp;&#8231;", "Six");
                addToArray(cards, 7, "7", "&#8281;&nbsp;&nbsp;&#8231;&#8231;", "Seven");
                addToArray(cards, 8, "8", "&#8281;&nbsp;&nbsp;&#8278;", "Eight");
                addToArray(cards, 9, "9", "&#8281;&nbsp;&nbsp;&#8280;", "Nine");
                addToArray(cards, 10, "10", "&#8281;&nbsp;&nbsp;&#8281;", "Ten");
                addToArray(cards, 11, "11", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8231;", "Eleven");
                addToArray(cards, 12, "12", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8231;&#8231;", "Twelve");
                addToArray(cards, 13, "13", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8278;", "Thirteen");
                addToArray(cards, 14, "14", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8280;", "Fourteen");
                addToArray(cards, 15, "15", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8281;", "Fifteen");
                addToArray(cards, 16, "16", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8281;&nbsp;&nbsp;&#8231;", "Sixteen");
                addToArray(cards, 17, "17", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8281;&nbsp;&nbsp;&#8231;&#8231;", "Seventeen");
                addToArray(cards, 18, "18", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8281;&nbsp;&nbsp;&#8278;", "Eighteen");
                addToArray(cards, 19, "19", "&#8281;&nbsp;&nbsp;&#8281;<br/>&#8281;&nbsp;&nbsp;&#8280;", "Nineteen");
                
                // shuffle cards and assign tags
                cards.sort( function(a, b) { return a.random - b.random; } );
                for (var n=0; n<cards.length; n++)
                    cards[n].tag = "card_" + n.toString();
                
                // go full screen
//                goFullScreen();
                
                // put the cards on the table
                var cardString = "";
                for (var n=0; n<cards.length; n++)
                    cardString += cards[n].html;
                document.getElementById("table").innerHTML = cardString;
            }
            
            //______________________________
            // go to full screen
            function goFullScreen()
            {
                if (_quitFullScreen) {
                    clearTimeout(_quitFullScreen);
                    _quitFullScreen = false;
                } else {
                    if (document.documentElement.requestFullScreen) {  
                        document.documentElement.requestFullScreen();  
                    } else if (document.documentElement.mozRequestFullScreen) {  
                        document.documentElement.mozRequestFullScreen();  
                    } else if (document.documentElement.webkitRequestFullScreen) {  
                        document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
                    } else if (document.documentElement.msRequestFullScreen) {  
                        document.documentElement.msRequestFullScreen();  
                    }
                }
            }
            
            
            //______________________________
            // stop full screen
            function quitFullScreen()
            {
                if (document.cancelFullScreen) {  
                    document.cancelFullScreen();  
                } else if (document.mozCancelFullScreen) {  
                    document.mozCancelFullScreen();  
                } else if (document.webkitCancelFullScreen) {  
                    document.webkitCancelFullScreen();  
                } else if (document.msCancelFullScreen) {  
                    document.msCancelFullScreen();  
                } 
                _quitFullScreen = false;
            }
            
            //-->
        </script>

    </head>
    <body onLoad="newGame()">
        <div style="position: relative; width:100%; left:0%; height:100%; top:0%; bottom:0; margin:0; padding:0;">
            <div id="table" class="table">
            </div>
            <div id="message" class="message" style="display: none;">
                <div id="messageText" style="position:relative; width:90%; height:90%; left:5%; top:5%; font-size: 2em;">
                    -- instructions --
                </div>
            </div>
        </div>
    </body>
</html>


