
<!DOCTYPE html>
<html>
    <!-- 
    Simple html memory game to teach the concept of numbers.
    Remember the place of cards that show the same number in different representations.
    
    Copyright (C) 2017 Jacob Kanev

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    For a copy of the GNU General Public License see <http://www.gnu.org/licenses/>.
    -->
    
    <head>
        <title>Addition Duell</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <style>
            
            html, body {
                background-color: #eef;
                width: 100vw;
                height: 100vh;
                margin: 0;
                padding: 0;
                border: 0;
                font-family: Sans-Serif;
                overflow: hidden;
            }
            
            button {
                display: inline;
                margin: 1vw;
                padding: 1vw;
                border: 1px solid #CCCCCC;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 10px;
                -moz-border-radius: 10px;
                border-radius: 10px;
                padding: 10px 10px 10px 10px;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #4A4A4A;
                background-color: #F7F5F6;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#F7F5F6), to(#DDDDDD));
                background-image: -webkit-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -moz-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -ms-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -o-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: linear-gradient(to bottom, #F7F5F6, #DDDDDD);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#F7F5F6, endColorstr=#DDDDDD);
                white-space: normal;
                font-size: 3vmin;
            }
            
            button:hover{
                border:1px solid #ADADAD;
                background-color: #E0E0E0;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#E0E0E0), to(#BDBBBC));
                background-image: -webkit-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -moz-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -ms-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -o-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: linear-gradient(to bottom, #E0E0E0, #BDBBBC);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#E0E0E0, endColorstr=#BDBBBC);
            }            
            
            button:active{
                border:1px solid #ADADAD;
                background-color: #E0E0E0;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#BDBBBC), to(#E0E0E0));
                background-image: -webkit-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -moz-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -ms-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -o-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: linear-gradient(to bottom, #BDBBBC, #E0E0E0);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#BDBBBC, endColorstr=#E0E0E0);
            }
            
            div.dots {
                font-weight: bold;
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                vertical-align: middle;
                color: #a00;
                display: none;
            }
            
            div.english {
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                vertical-align: middle;
                color: #060;
                display: none;
            }
            
            div.german {
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                vertical-align: middle;
                color: #060;
                display: none;
            }
            
            div.digits {
                background-color: #eaeaea;
                width: 100%;
                height: 100%;
                -webkit-border-radius: 15px;
                -moz-border-radius: 15px;
                border-radius: 15px;
                text-align: center;
                vertical-align: middle;
                color: #00a;
            }
            
            div.card {
                position: relative;
                float: left;
                border: 0.1vw solid #CCCCCC;
                margin: 0.3vw;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                padding: 0.3vw;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #4A4A4A;
                background-color: #F7F5F6;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#F7F5F6), to(#DDDDDD));
                background-image: -webkit-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -moz-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -ms-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -o-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: linear-gradient(to bottom, #F7F5F6, #DDDDDD);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#F7F5F6, endColorstr=#DDDDDD);
                white-space: normal;
                vertical-align: top;
            }
            
            div.card:hover{
                border: 0.1vw solid #ADADAD;
                background-color: #E0E0E0;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#E0E0E0), to(#BDBBBC));
                background-image: -webkit-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -moz-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -ms-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: -o-linear-gradient(top, #E0E0E0, #BDBBBC);
                background-image: linear-gradient(to bottom, #E0E0E0, #BDBBBC);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#E0E0E0, endColorstr=#BDBBBC);
            }            
            
            div.card:active{
                border: 0.1vw solid #ADADAD;
                background-color: #E0E0E0;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#BDBBBC), to(#E0E0E0));
                background-image: -webkit-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -moz-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -ms-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: -o-linear-gradient(top, #BDBBBC, #E0E0E0);
                background-image: linear-gradient(to bottom, #BDBBBC, #E0E0E0);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#BDBBBC, endColorstr=#E0E0E0);
            }
            
            div {
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #202020;
            }
            
            div.table {
                position: absolute; left:0; right:0;padding:0; width:100vw; height:100vh; text-align: justify;
            }
            
            div.message {
                position: relative;
                width:78vw;
                height:77vh;
                left:1%;
                top:1%;
                padding: 10vh 10vw 10vh 10vw;
                font-size: 3vmin;
                display: none;
                border: 1px solid #CCCCCC;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #4A4A4A;
                background-color: #F7F5F6;
                background-image: -webkit-gradient(linear, left top, left bottom, from(#F7F5F6), to(#DDDDDD));
                background-image: -webkit-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -moz-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -ms-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: -o-linear-gradient(top, #F7F5F6, #DDDDDD);
                background-image: linear-gradient(to bottom, #F7F5F6, #DDDDDD);
                filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=#F7F5F6, endColorstr=#DDDDDD);
                white-space: normal;
                vertical-align: top;
            }
            
            div.result {
                position: relative; float: left; padding: 0.5em; margin: 0.1em;
                display: none;
                border: 1px solid #CCCCCC;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 10px;
                -moz-border-radius: 10px;
                border-radius: 10px;
            }
            
            input.text {
                font-family: verdana, arial, sansserif;
                font-size: 3vmin;
                position: relative;
                float: left;
                border: 0.1px solid #CCCCCC;
                margin: 1vw;
                padding: 1vw;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: #FEFFFF 0px 2px 2px ;
                -webkit-border-radius: 20px;
                -moz-border-radius: 20px;
                border-radius: 20px;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
                color: #000000;
                background-color: #F7F5F6;
            }

            div.player {
                font-size: 3vmin;
                padding: 5vw;
                position: absolute;
                left:33vw;
                width:20vw;
                top:13vmin;
                height: 20vh;
                display: none;
                -webkit-box-shadow: #FEFFFF 0px 2px 2px ;
                -moz-box-shadow: #FEFFFF 0px 2px 2px ;
                box-shadow: 0px 0px 50px  #505050;
                -webkit-border-radius: 30px;
                -moz-border-radius: 30px;
                border-radius: 30px;
                text-shadow: 0px 2px 2px rgba(255,255,255,1);
            }
            
            span.stars {
                text-shadow: 0px 0px 1px #400;
                color: #fb0;
                font-size: 5vmin;
            }
            
            span.blue {
                color: #00c;
            }
            
            span.red {
                color: #c00;
            }
            
            span.green {
                color: #0c0;
            }

            </style>
        
        <script type="text/javascript">
            <!--
            
            
            // global gameHistory object
            var _gameHistory = null;
            var _equation = null;
            var _globalLock = false;
            var _quitFullScreen = false;
            var _language = "en";
            
            
            
            //______________________________
            // Class representing a single player.
            // Used to count points, colours and names.
            function Player(name, colour, id, max)
            {
                this.name = name;
                this.colour = colour;
                this.id = id;
                this.points = 0;
                this.pointString = "";
                this.nextPlayer = 0;
                this.cards = [];
                cardString = "";
                cols = Math.round(Math.sqrt(max+1));
                rows = Math.ceil((max+1) / cols);
                for (var i=0; i<max+1; i++) {
                    this.cards.push(new Card(i, rows, cols, this.id));
                    cardString += this.cards[i].html;
                }
                document.getElementById("table_" + this.id).innerHTML = cardString;
                document.getElementById(this.id).style.backgroundColor = this.colour;
            }
            

            
            
            //______________________________
            // Adds a point to the player's score,  displays a message with the new score and releases the lock
            Player.prototype.addPoint = function()
            {
                // show message
                this.points += 1;
                this.pointString += " <span class='stars'>&#9733;</span>";
                message = this.name + ": " + this.points.toString();
                if (_language == "en")
                    message += " points.<br/><br/><br/>" + this.pointString;
                if (_language == "de")
                    message += " Punkte.<br/><br/><br/>" + this.pointString;
                document.getElementById(this.id).innerHTML = message;
                document.getElementById(this.id).style.display = "block";
                
                // start time out for hiding message
                setTimeout( function(id) { document.getElementById(id).style.display = "none";  _globalLock = false;}.bind(0, this.id), 700 );
            };
            
            
            //______________________________
            // Remove all cards that are covered
            Player.prototype.clearUp = function()
            {
                for (i=0; i<this.cards.length; i++) {
                    if (this.cards[i].state === 'suggested')
                        this.cards[i].remove();
                }
            };
            
            
            //______________________________
            // Displays help for the player (what to do next)
            Player.prototype.hint = function(text)
            {
                document.getElementById("hint_" + this.id).innerHTML = text;
            };
            
            
            
            //______________________________
            // Pass - remove all highlights and confirm
            Player.prototype.pass = function()
            {
                for (var i=0; i<this.cards.length; i++) {
                    this.cards[i].suggest(false);
                }
            }
            
            
            
            //______________________________
            // Player writes a number into the next part of the equation
            Player.prototype.suggest = function(what, number1, number2, number3)
            {
                if (number2!==false)
                    this.cards[number2].suggest(false);
                if (number3!==false)
                    this.cards[number3].suggest(false);
                number = this.cards[number1].suggest(this);
                
                if (number !== false) {
                    switch (what) {
                        case "part1":
                            this.hint("Choose another number and press <i>Ready</i>, or press <i>Pass</i>.");
                            break;
                        case "part2":
                            this.hint("If you think your answer is correct, press <i>Ready</i>.");
                            break;
                        case "solution":
                            this.hint("Press <i>Ready</i> or choose a different number.");
                    }
                }
                return number;
            }
            
            //______________________________
            // Player confirms his choice of number
            Player.prototype.confirm = function(what)
            {
                message = "";
                switch (what) {
                    case 'part1':
                    case 'part2':
                        this.hint("Choose two numbers that add up to the number on the right and press <i>Ready</i>, or press <i>Pass</i>.");
                        this.nextPlayer.hint("");
                        for (var i=0; i<this.cards.length; i++) {
                            this.cards[i].enable();
                            this.nextPlayer.cards[i].disable();
                        }
                        break;
                    case 'solution':
                        this.hint("Choose a number for " + this.nextPlayer.name + ".");
                        var open = 0;
                        for (var i=this.cards.length-1; i>-1; i--) {
                            if (this.cards[i].state === "open" && open < 5) {
                                this.cards[i].enable();
                                open++;
                            } else
                                this.cards[i].disable();
                        }
                        break;
                }
            }
            
            //______________________________
            // class for a single number card
            // A memory card is represented by two divs with the outside one representing the card
            // and the inside one representing the face. The face div has a class according to the 
            // type: <div class="card"><div class="digits">23</div></div>
            // both divs have distinct IDs
            function Card(meaning, rows, cols, playerId)
            {
                this.state = "open";
                this.meaning = meaning; // the actual number that's on the card
                this.faceId = meaning.toString() + "_" + playerId + "_face";     // the respective div id, e.g. "3_face"
                this.cardId = meaning.toString() + "_" + playerId + "_card";     // the respective div id for the card, e.g. "3_card"
                this.string = meaning.toString();
                
                // determine sizes for width, left, top and height
                width = Math.floor(38.0 / cols); 
                left = (50.0 - cols*(width + 0.7)) / 2.0; 
                height = Math.floor(47.0 / rows);
                topValue = 0; //(60.0 - rows*(height + 2.4)) / 2.0;
                fontSize = 12 / cols;
                lineHeight =  30 / cols;
                
                // hack for bug in Chrome on Android
                if (navigator.userAgent.indexOf("Chrome") > -1 && navigator.userAgent.indexOf("Android") > -1) {
                    factor = 0.86;
                    height *= factor;
                    topValue *= factor;
                    fontSize *= factor;
                    lineHeight *= factor;
                }
                this.html = "<div class=\"card\" id=\"" + this.cardId + "\" style=\"width:" + width.toString() + "vw; height:" + height.toString() + "vh; left:" + left.toString() + "vw; top:" + topValue.toString() + "vh;\" onClick=\"_gameHistory.suggest('" + playerId + "', " + this.meaning.toString() + ");\">"
                    +     "<div class=\"digits\" id=\"" + this.faceId + "\" style=\"font-size:" + fontSize.toString() + "vw; line-height:" + lineHeight.toString() + "vh;\">"
                    +         this.string
                    +     "</div>"
                    + "</div>";
            }
            
            
            
            //______________________________
            // remove the card from the table
            Card.prototype.remove = function()
            {
                this.state = "removed";
                document.getElementById(this.cardId).style.visibility = "hidden";
            };
            
            
            
            //______________________________
            // disable a card
            Card.prototype.disable = function()
            {
                if (this.state === "open") {
                    this.state = "disabled";
                    document.getElementById(this.faceId).style.color = "#bbb";
                }
            };
            
            
            //______________________________
            // disable a card
            Card.prototype.enable = function()
            {
                if (this.state === "disabled") { // don't set suggested cards back to open
                    this.state = "open";
                    document.getElementById(this.faceId).style.color = "#00a";
                }
            };
            
            
            //______________________________
            // highlight a card
            Card.prototype.suggest = function(player)
            {
                number = false;
                colour = false;
                if (player===false && this.state==="suggested") {
                    this.state = "open";
                    colour = "#eaeaea";
                }
                if (player!==false && this.state==="open") {
                    number = this.meaning;
                    this.state = "suggested";
                    colour = player.colour;
                }
                document.getElementById(this.faceId).style.backgroundColor = colour;
                return number;
            };
            
            
            //______________________________
            // gameHistory object, tracks open cards, removes cards and assigns points
            // player1,2:  players
            function GameHistory(player1, player2)
            {
                this.player1 = player1;
                this.player2 = player2;
                this.player1.nextPlayer = this.player2;
                this.player2.nextPlayer = this.player1;
                this.currentPlayer = this.player1;
                
                // the equation: part1 + part2 = solution
                this.part1 = false;
                this.part2 = false;
                this.solution = false;
                this.nextMove = 'solution';
                this.currentPlayer.confirm("solution");
            }
            
            
            //______________________________
            // a confirm button has been clicked
            GameHistory.prototype.confirm = function()
            {
                switch (this.nextMove) {
                    case 'solution':
                        this.currentPlayer = this.currentPlayer.nextPlayer;
                        this.nextMove = 'part1';
                        break;
                    case 'part1':
                    case 'part2':                        
                        // calculating points for current player
                        if (this.part1 + this.part2 == this.solution)
                            this.currentPlayer.addPoint();
                        this.nextMove = 'solution';
                }
                this.currentPlayer.confirm(this.nextMove);
                this.player1.clearUp();
                this.player2.clearUp();
            };
            
            
            //______________________________
            // a pass button has been clicked
            GameHistory.prototype.pass = function()
            {
                this.part1 = false;
                this.part2 = false;
                this.solution = false;
                this.nextMove = "solution";
                this.currentPlayer.pass();
                this.currentPlayer.confirm(this.nextMove);
                this.updateGui();
            }
            
            
            
            //______________________________
            // a card has been clicked -- make a move
            GameHistory.prototype.suggest = function(player, number)
            {
                if (this.currentPlayer.id == player) {
                    if (!_globalLock) {
                        _globalLock = true;
                        switch (this.nextMove) {
                            case 'part1':
                                this.part1 = this.currentPlayer.suggest(this.nextMove, number, this.part1, this.part2);
                                this.part2 = false;
                                this.updateGui();
                                this.nextMove = 'part2';
                                break;
                            case 'part2':
                                this.part2 = this.currentPlayer.suggest(this.nextMove, number, false, false);
                                this.updateGui();
                                this.nextMove = 'part1';
                                break;
                            case 'solution':
                                this.part1 = false;
                                this.part2 = false;
                                this.solution = this.currentPlayer.suggest(this.nextMove, number, this.solution, false);
                                this.updateGui();
                        }
                        _globalLock = false;
                    }
                }
            };
            
            
            
            //______________________________
            // a card has been clicked -- make a move
            GameHistory.prototype.updateGui = function()
            {
                part1 = this.part1!==false ? this.part1 : "&nbsp;&nbsp;";
                part2 = this.part2!==false ? this.part2 : "&nbsp;&nbsp;";
                solution = this.solution!==false ? this.solution : "&nbsp;&nbsp;";
                document.getElementById("equation").innerHTML = "<span class='red'>"+part1+"</span>" +  " + " + "<span class='green'>"+part2+"</span>" + " = " + "<span class='blue'>"+solution+"</span>";
                part1String = "";
                for (var i=0; i<part1; i++) part1String += "&#8226;";
                part2String = "";
                for (var i=0; i<part2; i++) part2String += "&#8226;";
                solutionString = "";
                for (var i=0; i<solution; i++) solutionString += "&#8226;";
                document.getElementById("helper").innerHTML = "<span class='red'>"+part1String+"</span><span class='green'>"+part2String+"</span><br/><span class='blue'>"+solutionString+"</span>";
            };
            
            
            
            //______________________________
            // start a new game --
            // create a new gameHistory, create new cards, shuffle them
            // and put them face down on the table
            function newGame(max)
            {
                // get players and create history
                name = document.getElementById("name1_" + _language).value.trim();
                colour = document.getElementById("name1_" + _language).style.backgroundColor;
                player1 = new Player(name, colour, "player1", max);
                name = document.getElementById("name2_" + _language).value.trim();
                colour = document.getElementById("name2_" + _language).style.backgroundColor;
                player2 = new Player(name, colour, "player2", max);
                _gameHistory = null;
                _gameHistory = new GameHistory(player1, player2);
            }
            
            
            
            //______________________________
            // start a new game --
            // create a new gameHistory, create new cards, shuffle them
            // and put them face down on the table
            function finishGame(rows, cols)
            {
                resultsTable = "<table>"
                for (var i=0; i<_gameHistory.players.length; i++) {
                    player = _gameHistory.players[i];
                    resultsTable += "<tr><td>&nbsp;&nbsp;&nbsp;" + player.name
                    + "&nbsp;&nbsp;&nbsp;</td><td>&nbsp;&nbsp;&nbsp;" + player.points
                    + "&nbsp;&nbsp;&nbsp;</td><td>&nbsp;&nbsp;&nbsp;" + player.pointString
                    + "&nbsp;&nbsp;&nbsp;</td></tr>";
                }
                resultsTable += "</table>";
                document.getElementById('results_' + _language).innerHTML = resultsTable;
                nextTimeOut += 700;
            }
            
            
            //______________________________
            // go to full screen
            function goFullScreen()
            {
                if (_quitFullScreen) {
                    clearTimeout(_quitFullScreen);
                    _quitFullScreen = false;
                } else {
                    if (document.documentElement.requestFullScreen) {  
                        document.documentElement.requestFullScreen();  
                    } else if (document.documentElement.mozRequestFullScreen) {  
                        document.documentElement.mozRequestFullScreen();  
                    } else if (document.documentElement.webkitRequestFullScreen) {  
                        document.documentElement.webkitRequestFullScreen(Element.ALLOW_KEYBOARD_INPUT);  
                    } else if (document.documentElement.msRequestFullScreen) {  
                        document.documentElement.msRequestFullScreen();  
                    }
                }
            }
            
            
            //______________________________
            // stop full screen
            function quitFullScreen()
            {
                if (document.cancelFullScreen) {  
                    document.cancelFullScreen();  
                } else if (document.mozCancelFullScreen) {  
                    document.mozCancelFullScreen();  
                } else if (document.webkitCancelFullScreen) {  
                    document.webkitCancelFullScreen();  
                } else if (document.msCancelFullScreen) {  
                    document.msCancelFullScreen();  
                } 
                _quitFullScreen = false;
            }
            
            
            
            //______________________________
            // start the session
            function startSession(max, language) {
                _language = language;
                goFullScreen();
                newGame(max);
            }
            
            
            
            //______________________________
            // hides the first id and shows the second
            function proceed(hide, show)
            {
                document.getElementById(hide).style.display = "none";
                document.getElementById(show).style.display = "block";
            }
            
            //-->
        </script>

    </head>
    <body>
        <!-- Card table -->
        <div id="table" class="table">
            <div id="hint_player1" style="position: relative; float: left; width:20vw; padding: 2vh 2vw 0 2vw; height:36vh; font-size:3vh;"></div>
            <div style="position: relative; float: left; width:50vw; height:38vh;">
                <div id="equation" style="position: relative; float: left; width:50vw; height:14vh;font-size:10vh; text-align: center;"></div>
                <div style="position: relative; float: left; width:50vw; height:10vh;font-size:8vh; line-height:4vh; text-align: center;">
                    <div id="helper" style="display: inline-block; text-align: left;"></div>
                </div>
                <div style="position: relative; float: left; width:50vw; height: 14vh; text-align: center;">
                    <button onClick="_gameHistory.confirm()">Ready</button>
                    <button onClick="_gameHistory.pass()">Pass</button>
                </div>
            </div>
            <div id="hint_player2" style="position: relative; float: left; width:20vw; padding: 2vh 2vw 0 2vw; height:36vh;font-size:3vh;"></div>
            <div id="table_player1" style="position: relative; float: left; width:48vw; height: 60vh;"></div>
            <div id="table_player2" style="position: relative; float: left; width:48vw; height: 60vh;"></div>
        </div>
        
        <!-- Language chose -->
        <div id="language" class="message" style="display:block;">
                <button onClick="proceed('language', 'intro_en');" style="clear:left;">English</button>
                <button onClick="proceed('language', 'intro_de');" style="clear:left;">Deutsch</button>
        </div>
        
        <!-- English workflow -->
        <div id="intro_en" class="message">
            <b>Addition Duell</b> <br>
            Challenge your opponent to a duell of sums! Players play in turns.
            <ul>
            <li>The first player chooses a number and presses "Ready".</li>
            <li>The second player chooses two numbers that add up to the number from the first player and presses "Ready". If the equation is correct, the second player gets a point.</li>
            <li>The second player chooses a number for the first player and presses "Ready". Then the first player finds two numbers to complete the equation.</li>
            <li>If there are no numbers available that would complete a sum, the player presses "Pass".</li>
            </ul>
            The winner is the player with most points.<br/>
            <br/><br/>
            <div>
                <button onClick="proceed('intro_en', 'names_en');">Next</button> or <button onClick="proceed('intro_en', 'language');">Go Back</button>
            </div>
        </div>
        <div id="names_en" class="message">
            Enter two players
            <br/>
            <input id="name1_en" type="text" class="text" style="clear:left; background-color: #fff090"></input>
            <input id="name2_en" type="text" class="text" style="clear:left; background-color: #b0fff0"></input>
            <br/><br/>
            <div>
                <button onClick="proceed('names_en', 'start_en');">Next</button> or <button onClick="proceed('names_en', 'intro_en');">Go Back</button>
            </div>
        </div>
        <div id="start_en" class="message">
            Choose your game size and start
            <br/>
            <button onClick="startSession(10,'en'); proceed('start_en', 'table');" style="clear:left;">All numbers up to 10</button><br/>
            <button onClick="startSession(15,'en'); proceed('start_en', 'table');" style="clear:left;">All numbers up to 15</button><br/>
            <button onClick="startSession(20,'en'); proceed('start_en', 'table');" style="clear:left;">All numbers up to 20</button><br/>
            <button onClick="startSession(50,'en'); proceed('start_en', 'table');" style="clear:left;">All numbers up to 50</button><br/>
            <button onClick="startSession(100,'en'); proceed('start_en', 'table');" style="clear:left;">All numbers up to 100</button>
            <br/><br/>
            <div>
                Or <button onClick="proceed('start_en', 'names_en');">Go Back</button>
            </div>
        </div>
        <div id="finish_en" class="message">
            Final Results
            <br/><br/>
            <span id="results_en"></span>
            <br/><br/>
            <button onClick="proceed('finish_en', 'names_en');" style="clear:left;">New Game</button>
            <br/>
        </div>
        
        <!-- German workflow -->
        <div id="intro_de" class="message">
            <b>Dreifach-Zahlen-Memory</b> <br>
            Finde alle Karten, die die gleiche Zahl zeigen. Immer drei Karten geh&ouml;ren zusammen, wie zum Beispield <span style="color: #f00000;"><b><i>3</i></b></span> und <span style="color: #f00000;"><b><i>&#8756;</i></b></span> und <span style="color: #f00000;"><b><i>Drei</i></b></span>. Spieler spielen der Reihe nach, jeder Spieler deckt drei neue Karten auf, danach ist der n&auml;chste Spieler an der Reihe.
            <br/><br/>
            <div>
                <button onClick="proceed('intro_de', 'names_de');">Weiter</button> oder <button onClick="proceed('intro_de', 'language');">Zur&uuml;ck</button>
            </div>
        </div>
        <div id="names_de" class="message">
            Tragt bis zu vier Spieler ein
            <br/>
            <input id="name1_de" type="text" class="text" style="clear:left; background-color: #fff090"></input>
            <input id="name2_de" type="text" class="text" style="clear:left; background-color: #b0fff0"></input>
            <input id="name3_de" type="text" class="text" style="clear:left; background-color: #f0c0ff"></input>
            <input id="name4_de" type="text" class="text" style="clear:left; background-color: #e0ffa0"></input>
            <br/><br/>
            <div>
                <button onClick="proceed('names_de', 'start_de');">Weiter</button> oder <button onClick="proceed('names_de', 'intro_de');">Zur&uuml;ck</button>
            </div>
        </div>
        <div id="start_de" class="message">
            W&auml;hlt eine Spielgr&ouml;&szlig;e
            <br/>
            <button onClick="startSession(7,9,'de'); proceed('start_de', 'table');" style="clear:left;">Riesig</button>
            <button onClick="startSession(6,8,'de'); proceed('start_de', 'table');" style="clear:left;">Gro&szlig;</button>
            <button onClick="startSession(5,6,'de'); proceed('start_de', 'table');" style="clear:left;">Mittel</button>
            <button onClick="startSession(4,6,'de'); proceed('start_de', 'table');" style="clear:left;">Klein</button>
            <button onClick="startSession(3,5,'de'); proceed('start_de', 'table');" style="clear:left;">Winzig</button>  
            <br/><br/>
            <div>
                Oder <button onClick="proceed('start_de', 'names_de');">Zur&uuml;ck</button>
            </div>
        </div>
        <div id="finish_de" class="message">
            Ergebnis
            <br/><br/>
            <span id="results_de"></span>
            <br/><br/>
            <button onClick="proceed('finish_de', 'names_de');" style="clear:left;">Neues Spiel</button>
            <br/>
        </div>
        
        <!-- Player message boxes -->
        <div id="player1" class="player"></div>
        <div id="player2" class="player"></div>
    </body>
</html>


